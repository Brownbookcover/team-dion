[gd_scene load_steps=14 format=3 uid="uid://85a6rupdhemo"]

[ext_resource type="Environment" uid="uid://bquv4xy10rwyd" path="res://lighting_test/light_world_world_env.tres" id="2_r8xm2"]
[ext_resource type="Shader" path="res://lighting_test/nighthawk.gdshader" id="2_x017c"]
[ext_resource type="Texture2D" uid="uid://bjo1oktmpu82x" path="res://lighting_test/14428-normal.jpg" id="3_aii6d"]
[ext_resource type="PackedScene" uid="uid://5cvfjemb1qjn" path="res://art/genericbuildings.glb" id="4_y6wvf"]
[ext_resource type="PackedScene" uid="uid://ba2vnxtmwpbqf" path="res://art/cornerstore.glb" id="5_p8d66"]
[ext_resource type="PackedScene" uid="uid://d01pe4fklbf8n" path="res://art/diner.glb" id="6_bstc8"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oj1bl"]
render_priority = -1
shader = ExtResource("2_x017c")
shader_parameter/distortion_strength = 0.006
shader_parameter/distortion_scale = 19.421
shader_parameter/normal_map = ExtResource("3_aii6d")

[sub_resource type="QuadMesh" id="QuadMesh_uyuca"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gbhky"]
transparency = 1
albedo_color = Color(0.435294, 0.486275, 0.572549, 0.572549)
roughness = 0.0
disable_receive_shadows = true

[sub_resource type="ArrayMesh" id="ArrayMesh_5e1le"]
_surfaces = [{
"aabb": AABB(-1.11174, 0.331568, -1.42561, 3.20902, 0.879871, 3.78682),
"format": 34896613377,
"index_count": 60,
"index_data": PackedByteArray(8, 0, 6, 0, 7, 0, 8, 0, 9, 0, 6, 0, 4, 0, 2, 0, 3, 0, 4, 0, 5, 0, 2, 0, 7, 0, 5, 0, 4, 0, 7, 0, 6, 0, 5, 0, 3, 0, 1, 0, 0, 0, 3, 0, 2, 0, 1, 0, 17, 0, 10, 0, 21, 0, 17, 0, 19, 0, 10, 0, 14, 0, 16, 0, 15, 0, 14, 0, 13, 0, 16, 0, 11, 0, 20, 0, 18, 0, 11, 0, 12, 0, 20, 0, 18, 0, 19, 0, 17, 0, 18, 0, 20, 0, 19, 0, 21, 0, 23, 0, 22, 0, 21, 0, 10, 0, 23, 0, 22, 0, 25, 0, 24, 0, 22, 0, 23, 0, 25, 0),
"name": "B_glass",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 26,
"vertex_data": PackedByteArray(73, 0, 251, 2, 233, 88, 0, 0, 73, 0, 3, 253, 233, 88, 0, 0, 111, 8, 3, 253, 49, 54, 0, 0, 111, 8, 251, 2, 49, 54, 0, 0, 191, 30, 251, 2, 230, 25, 0, 0, 191, 30, 3, 253, 230, 25, 0, 0, 34, 64, 3, 253, 254, 6, 0, 0, 34, 64, 251, 2, 254, 6, 0, 0, 26, 105, 251, 2, 22, 0, 0, 0, 26, 105, 3, 253, 22, 0, 0, 0, 0, 0, 255, 255, 170, 191, 0, 0, 0, 0, 0, 0, 141, 91, 0, 0, 0, 0, 255, 255, 141, 91, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 255, 255, 0, 0, 0, 0, 0, 0, 112, 107, 0, 0, 0, 0, 0, 0, 112, 107, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 75, 158, 0, 0, 0, 0, 0, 0, 236, 124, 0, 0, 0, 0, 255, 255, 75, 158, 0, 0, 0, 0, 255, 255, 236, 124, 0, 0, 0, 0, 0, 0, 40, 191, 0, 0, 0, 0, 0, 0, 135, 224, 0, 0, 0, 0, 255, 255, 135, 224, 0, 0, 0, 0, 0, 0, 255, 255, 0, 0, 0, 0, 255, 255, 255, 255, 0, 0)
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_2kdd4"]
resource_name = "diner_Plane_005"
_surfaces = [{
"aabb": AABB(-1.11174, 0.331568, -1.42561, 3.20902, 0.879871, 3.78682),
"attribute_data": PackedByteArray(105, 20, 153, 120, 105, 20, 153, 120, 11, 24, 223, 76, 11, 24, 223, 76, 157, 43, 146, 31, 157, 43, 146, 31, 62, 106, 124, 17, 62, 106, 124, 17, 161, 166, 213, 14, 161, 166, 213, 14, 117, 20, 201, 123, 21, 22, 210, 239, 117, 20, 201, 123, 117, 20, 201, 123, 131, 233, 217, 15, 131, 233, 217, 15, 131, 169, 224, 14, 131, 169, 224, 14, 138, 21, 37, 201, 0, 21, 119, 162, 138, 21, 37, 201, 0, 21, 119, 162, 117, 20, 201, 123, 21, 22, 210, 239, 0, 21, 119, 162, 0, 21, 119, 162, 130, 21, 239, 198, 130, 21, 239, 198),
"format": 34896613399,
"index_count": 60,
"index_data": PackedByteArray(8, 0, 6, 0, 7, 0, 8, 0, 9, 0, 6, 0, 4, 0, 2, 0, 3, 0, 4, 0, 5, 0, 2, 0, 7, 0, 5, 0, 4, 0, 7, 0, 6, 0, 5, 0, 3, 0, 1, 0, 0, 0, 3, 0, 2, 0, 1, 0, 18, 0, 11, 0, 23, 0, 18, 0, 20, 0, 11, 0, 15, 0, 17, 0, 16, 0, 15, 0, 14, 0, 17, 0, 12, 0, 21, 0, 19, 0, 12, 0, 13, 0, 21, 0, 19, 0, 20, 0, 18, 0, 19, 0, 21, 0, 20, 0, 22, 0, 25, 0, 24, 0, 22, 0, 10, 0, 25, 0, 24, 0, 27, 0, 26, 0, 24, 0, 25, 0, 27, 0),
"material": SubResource("StandardMaterial3D_gbhky"),
"name": "B_glass",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 28,
"vertex_data": PackedByteArray(73, 0, 251, 2, 233, 88, 23, 218, 73, 0, 3, 253, 233, 88, 23, 218, 111, 8, 3, 253, 49, 54, 25, 223, 111, 8, 251, 2, 49, 54, 25, 223, 191, 30, 251, 2, 230, 25, 170, 233, 191, 30, 3, 253, 230, 25, 170, 233, 34, 64, 3, 253, 254, 6, 184, 244, 34, 64, 251, 2, 254, 6, 184, 244, 26, 105, 251, 2, 22, 0, 87, 250, 26, 105, 3, 253, 22, 0, 87, 250, 0, 0, 255, 255, 170, 191, 255, 191, 0, 0, 255, 255, 170, 191, 255, 191, 0, 0, 0, 0, 141, 91, 255, 191, 0, 0, 255, 255, 141, 91, 255, 191, 255, 255, 255, 255, 0, 0, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 112, 107, 0, 0, 0, 0, 0, 0, 112, 107, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 75, 158, 255, 191, 0, 0, 0, 0, 236, 124, 255, 191, 0, 0, 255, 255, 75, 158, 255, 191, 0, 0, 255, 255, 236, 124, 255, 191, 0, 0, 0, 0, 40, 191, 255, 191, 0, 0, 0, 0, 40, 191, 255, 191, 0, 0, 0, 0, 135, 224, 255, 191, 0, 0, 255, 255, 135, 224, 255, 191, 0, 0, 0, 0, 255, 255, 255, 191, 0, 0, 255, 255, 255, 255, 255, 191, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 255, 255, 127, 255, 191, 254, 191, 255, 191, 254, 191, 255, 191, 254, 191, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255)
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_5e1le")

[sub_resource type="BoxMesh" id="BoxMesh_ivxbc"]
size = Vector3(1000, 1, 1000)

[sub_resource type="BoxShape3D" id="BoxShape3D_nmdmi"]
size = Vector3(1000, 1, 1000)

[node name="Nighthawk" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("2_r8xm2")

[node name="Camera2" type="Camera3D" parent="."]
transform = Transform3D(0.744312, -0.023307, -0.667426, 0, 0.999391, -0.0348995, 0.667833, 0.0259761, 0.743858, -10.098, 2.205, 27.914)
fov = 22.8952
near = 0.1
far = 1000.0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Camera2"]
transform = Transform3D(1, 0, -2.98023e-08, 4.65661e-10, 1, 0, 2.98023e-08, 0, 1, 0, 0, -1.369)
material_override = SubResource("ShaderMaterial_oj1bl")
mesh = SubResource("QuadMesh_uyuca")

[node name="genericbuildings" parent="." instance=ExtResource("4_y6wvf")]

[node name="cornerstore" parent="." instance=ExtResource("5_p8d66")]

[node name="diner2" parent="." instance=ExtResource("6_bstc8")]

[node name="diner_glass" parent="diner2/Diner" index="2"]
transform = Transform3D(3.83839, 0, 0, 0, 3.83839, 0, 0, 0, 3.83839, 7.00112, 0.305045, 14.5115)
mesh = SubResource("ArrayMesh_2kdd4")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_ivxbc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_nmdmi")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.2974, 0.925081, 0.236173, -0.151599, -0.289982, 0.944949, 0.942641, 0.245224, 0.226482, 0, 0, 0)
light_color = Color(0.870588, 0.929412, 1, 1)
light_energy = 0.0
shadow_enabled = true
shadow_blur = 10.0

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.75634, 4.20023, 18.1674)
light_color = Color(0.831373, 0.768627, 0.572549, 1)
light_indirect_energy = 0.0
shadow_enabled = true
omni_range = 27.344
omni_attenuation = 0.34151

[node name="OmniLight3D2" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.3183, 4.20023, 22.7874)
light_color = Color(0.831373, 0.768627, 0.572549, 1)
light_indirect_energy = 0.0
shadow_enabled = true
omni_range = 27.344
omni_attenuation = 0.34151

[editable path="diner2"]
